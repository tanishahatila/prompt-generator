<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Prompt Generator Dashboard</title>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>

<script>
tailwind.config = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        primary: "#8c2bee",
        "background-light": "#f7f6f8",
        "background-dark": "#0e1117",
        "sidebar-dark": "#1a1122",
      },
      fontFamily: {
        display: ["Inter", "sans-serif"]
      }
    }
  }
}
</script>

<style>
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}
body { font-family: 'Inter', sans-serif; }
.sidebar-scroll::-webkit-scrollbar { width: 4px; }
.sidebar-scroll::-webkit-scrollbar-thumb {
  background: #362348;
  border-radius: 10px;
}
.highlight { background-color: rgb(164, 112, 212); font-weight: bold; }

#answer-text {
  font-size: 1.05rem;
  line-height: 1.8;
  font-weight: 500;
  letter-spacing: 0.2px;
  color: rgba(255, 255, 255, 0.804);
  animation: introFade 0.7s ease-out;
}
@keyframes introFade {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body class="bg-background-light dark:bg-background-dark text-gray-900 dark:text-gray-100 min-h-screen font-display">

<div class="flex h-screen overflow-hidden">

<!-- ================= SIDEBAR ================= -->
<aside class="hidden md:flex w-[320px] bg-sidebar-dark border-r border-[#362348] flex-col sidebar-scroll overflow-y-auto">
  <div class="p-6 flex flex-col gap-8">

    <div>
      <div class="flex items-center gap-3">
        <!-- Logo -->
        <svg width="44" height="44" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#a78bfa"/>
              <stop offset="100%" stop-color="#7c3aed"/>
            </linearGradient>
          </defs>
          <path d="M40 55 Q40 30 65 30 H135 Q160 30 160 55 V115 Q160 140 135 140 H95 L70 165 V140 H65 Q40 140 40 115 Z" fill="url(#g1)"/>
          <ellipse cx="28" cy="85" rx="12" ry="20" fill="#8b5cf6"/>
          <ellipse cx="172" cy="85" rx="12" ry="20" fill="#8b5cf6"/>
          <rect x="60" y="60" width="80" height="45" rx="10" fill="#1f1147"/>
          <circle cx="85" cy="83" r="6" fill="#c4b5fd"/>
          <circle cx="115" cy="83" r="6" fill="#c4b5fd"/>
          <rect x="98" y="18" width="4" height="14" rx="2" fill="#a78bfa"/>
          <circle cx="100" cy="14" r="6" fill="#a78bfa"/>
        </svg>

        <h1 class="text-white text-xl font-bold tracking-wide">Prompt Studio</h1>
      </div>

      {% if session['username'] %}
      <p class="text-gray-400 text-sm mt-3">Welcome, {{ session['username'] }}</p>
      {% endif %}
    </div>

    <div class="h-px bg-[#362348]"></div>

    <div class="flex flex-col gap-6">
      <h2 class="text-white text-sm font-semibold uppercase tracking-widest">Configuration</h2>

      <div>
        <label class="text-white text-sm">Category</label>
        <select class="w-full mt-2 rounded-lg bg-[#362348] text-white py-3 px-4">
          <option>Academic</option>
          <option>Engineering</option>
          <option>Computer Science</option>
        </select>
      </div>
    </div>

    <a href="{{ url_for('logout') }}" class="flex items-center gap-2 mt-6 p-2 text-white hover:bg-primary rounded-lg">
      <span class="material-symbols-outlined">logout</span> Logout
    </a>

  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="flex-1 overflow-y-auto">

<div class="max-w-[1000px] mx-auto px-4 sm:px-8 py-8 sm:py-12">

<!-- Heading -->
<div class="mb-8 sm:mb-10">
  <h2 class="text-3xl sm:text-4xl font-black mb-2">Generate Prompts</h2>
  <p class="text-gray-500 dark:text-[#ad92c9]">
    Clean, short, AI Understandable Prompts.
  </p>
</div>

<!-- ================= INPUT ================= -->
<form method="POST" class="flex flex-col gap-6 mb-10">

  <div>
    <label class="text-sm font-semibold ml-1">Enter Question</label>
    <input
      name="query"
      required
      class="w-full h-14 bg-white dark:bg-[#1a1122] border-2 border-gray-200 dark:border-[#362348] rounded-xl px-6 focus:border-primary"
      placeholder="e.g. Explain SQL Injection"
    />
  </div>

  <button
    type="submit"
    class="h-14 bg-primary text-white font-bold rounded-xl flex items-center justify-center gap-2">
    <span class="material-symbols-outlined">auto_awesome</span>
    Generate Prompt
  </button>

</form>

<!-- ================= OUTPUT ================= -->
<div class="flex flex-col gap-4">

<h3 class="text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-[#ad92c9]">
Generated Prompt
</h3>

<div class="relative">

<div class="min-h-[260px] sm:min-h-[320px] bg-white dark:bg-[#1a1122] border-2 border-gray-200 dark:border-[#362348] rounded-2xl p-5 sm:p-8 whitespace-pre-line">

{% if chat %}
<div id="answer-text">
  {{ chat[-1].text | highlight_keywords | safe }}
</div>
{% else %}
Your generated notes will appear here.
{% endif %}

</div>

<div class="absolute top-4 right-4 flex flex-wrap gap-2">
  {% if chat %}
    <button onclick="copyText('answer-text')" class="p-3 bg-gray-50 dark:bg-[#362348] rounded-lg hover:bg-primary hover:text-white">
      <span class="material-symbols-outlined">content_copy</span>
    </button>
    <a href="/download/{{ chat|length - 1 }}/txt" class="p-3 bg-gray-50 dark:bg-[#362348] rounded-lg hover:bg-primary hover:text-white">
      <span class="material-symbols-outlined">download</span>
    </a>
    <a href="/download/{{ chat|length - 1 }}/pdf" class="p-3 bg-gray-50 dark:bg-[#362348] rounded-lg hover:bg-primary hover:text-white">
      <span class="material-symbols-outlined">picture_as_pdf</span>
    </a>
  {% endif %}
</div>

</div>
</div>

</div>
</main>
</div>

<script>
function copyText(id) {
  const text = document.getElementById(id).innerText;
  navigator.clipboard.writeText(text);
}
</script>

</body>
</html>
